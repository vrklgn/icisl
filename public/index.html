<html>
  <head>
  <link rel="stylesheet" href="style.css" type="text/css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Jersey+10&display=swap" rel="stylesheet">
</head>
  <body>
  <div id="header">
    <p>Is Corporate IT still living?</p>
  <div id="content"><!DOCTYPE html>
<html>
<head>
    <title>Fetch XML Feed</title>
</head>
<body>
    <h1>XML Feed Data:</h1>
    <p id="latitude"></p>
    <p id="longitude"></p>
    <p id="time"></p>
    <p id="result"></p>

    <script>
    // START GENAI@CHATGPT4
    document.addEventListener("DOMContentLoaded", function() {
        fetch('/fetch-feed')
            .then(response => response.json())
            .then(data => {
                console.log(data);

                document.getElementById('latitude').textContent = 'Latitude: ' + data.lat;
                document.getElementById('longitude').textContent = 'Longitude: ' + data.long;
                document.getElementById('time').textContent = 'Time: ' + data.time;
                
                // Convert the time string to a Date object
                const feedTime = new Date(data.time);
                
                // Get the current date and time
                const now = new Date();

                // Calculate the difference in milliseconds
                const diff = now - feedTime;

                // Convert the difference to hours
                const hours = diff / 1000 / 60 / 60;

                // Determine the result
                const result = hours <= 4 ? 'YES' : 'Maybe';

                // Display the result
                document.getElementById('result').textContent = 'Result: ' + result;
            })
            .catch((error) => {
                console.error('Error:', error);
            });
    });
    // END GENAI@CHATGPT4
    </script>
  </div>
  </div>
  </body>
</html>
