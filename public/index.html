<html>
  <head>
  <link rel="stylesheet" href="style.css" type="text/css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Jersey+10&display=swap" rel="stylesheet">
</head>
  <body>
  <div id="header">
    <p></p>
  <div id="content">
<html>
<head>
    <title>Is Corporate IT still living?</title>
</head>
<body>
    <p id="result"></p>
  <div id="location"></div>
  <p id="cordinates"></p>
    <h3>Last Seen</h3>
    <p id="time"></p>
    

   <script>
// START GENAI@CHATGPT4
document.addEventListener("DOMContentLoaded", function() {
    fetch('/fetch-feed')
        .then(response => response.json())
        .then(data => {
            console.log(data);

            document.getElementById('cordinates').textContent = data.lat+" , "+data.long;
            document.getElementById('time').textContent = data.time;
            
             // Convert the time string to a Date object
            const feedTime = new Date(data.time);
            
            // Convert the Date object to ISO 8601 format
            const isoTime = feedTime+2.toISOString();
            
            document.getElementById('time').textContent = isoTime;
            
            // Get the current date and time
            const now = new Date();

            // Calculate the difference in milliseconds
            const diff = now - feedTime;

            // Convert the difference to hours
            const hours = diff / 1000 / 60 / 60;

            // Determine the result
            const result = hours <= 4 ? 'Yes' : 'Maybe';

            // Display the result
            document.getElementById('result').textContent = result;

            // Fetch the image from your server
            fetch(`/map-image?lat=${data.lat}&long=${data.long}`)
                .then(response => response.json())
                .then(imageData => {
                    // Create an img element
                    const img = document.createElement('img');
                    img.src = imageData.image;
                    
                    // Append the img element to the div with the id "location"
                    document.getElementById('location').appendChild(img);
                }).catch(error => console.error('Error:', error));
        })
        .catch((error) => {
            console.error('Error:', error);
        });
});
// END GENAI@CHATGPT4
</script>
  </div>
  </div>
  </body>
</html>
